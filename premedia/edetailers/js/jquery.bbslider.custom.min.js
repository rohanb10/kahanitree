!function(g){"use strict";function t(a,t,e){return g('<div class="bb-link-wrapper"><a href="#" class="bb-pager-link">&#9679;</a></div>')}var v="bbslider",e={init:function(f){var a={start:1,duration:1e3,controls:!1,controlsText:null,pager:!1,pagerWrap:".pager-wrap",pagerText:t,auto:!1,timer:5e3,loop:!0,transition:"slide",callbackStart:null,callbackBefore:null,callbackAfter:null,callbackUpdate:null,easing:"linear",autoHeight:!0,dynamicHeight:!1,pauseOnHit:!0,loopTrans:!0,touch:!1,touchoffset:50,dragControls:!1,dragoffset:50};return f=g.extend({},a,f),this.each(function(){var e=g(this),a=e.children(),t=f.start-1,n=f.start-1,s=a.length;if(e.data({autoPlay:!1,pIndex:t,xIndex:t,cIndex:n,pCount:s,settings:f}),e.addClass("bbslider-wrapper"),a.addClass("panel"),f.loop?e.addClass("loop-true"):e.addClass("loop-false"),f.pager&&e[v]("pager"),f.controls){var r=e[v]("controls"),i=r.next,o=r.prev;i.click(function(a){e[v]("next"),a.preventDefault(),f.pauseOnHit&&e[v]("autoPlayPause")}),o.click(function(a){e[v]("prev"),a.preventDefault(),f.pauseOnHit&&e[v]("autoPlayPause")})}if(f.touch||f.dragControls){var l,d,c,u="",p="";f.touch&&(u+="touchstart ",p+="touchend touchcancel "),f.dragControls&&(u+="mousedown ",p+="mouseup "),e.on(u,function(a){var t=a;if("mousedown"!=a.type)t=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];l=t.pageX}),e.on(p,function(a){var t=a;if(c=f.dragoffset,"mouseup"!=a.type){t=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];c=f.touchoffset}d=t.pageX,l+c<d?(e[v]("prev"),f.pauseOnHit&&e[v]("autoPlayPause")):d<l-c&&(e[v]("next"),f.pauseOnHit&&e[v]("autoPlayPause"))})}f.auto&&(e.data("autoPlay",!0),e[v]("autoPlayStart")),e[v]("setup"),f.autoHeight&&e[v]("recalcHeight");var h=f.callbackStart;g.isFunction(h)&&h.call(this)})},update:function(){return this.each(function(){var a=g(this),t=a.children(":not(.control-wrapper)"),e=t.length,n=a.data("settings"),s=(a.data("pIndex"),n.pager),r=n.autoHeight,i=n.callbackUpdate;a.data("pCount",e),t.addClass("panel"),s&&a[v]("pager"),a[v]("setup"),r&&a[v]("recalcHeight"),g.isFunction(i)&&i.call(this)})},destroy:function(){return this.each(function(){var a=g(this),t=a.children(".panel"),e=a.data("settings");a.attr("id");a.removeClass("bbslider-wrapper first-panel last-panel loop-true loop-false linear"),t.removeClass("panel active slide none").removeAttr("style"),a.css("height",""),e.pager&&g(e.pagerWrap).empty(),a.children(".prev-control-wrapper").remove(),a.children(".next-control-wrapper").remove(),a.data("autoPlay")&&a[v]("autoPlayPause"),a.removeData()})},recalcHeight:function(){return this.each(function(){var a=g(this),t=a.children(".panel"),e=a.data("settings"),n=a.data("pIndex"),s=(a.data("pCount"),e.autoHeight),r=e.dynamicHeight,i=0,o=0;r&&s?i=t.eq(n).outerHeight(!0):t.each(function(){o=g(this).outerHeight(!0),i<o&&(i=o)}),a.height(i)})},autoPlayStart:function(){return this.each(function(){var a=g(this),t=a.data("settings");if(a.data("autoPlay")){var e=t.duration,n=t.timer,s=setInterval(function(){a[v]("next")},n+e);a.data("tid",s)}})},autoPlayPause:function(){return this.each(function(){var a=g(this),t=a.data("tid");a.data("autoPlay")&&(clearInterval(t),a.data("autoPlay",!1))})},autoPlayReset:function(){return this.each(function(){var a=g(this),t=a.data("tid");a.data("autoPlay")&&(clearInterval(t),a[v]("autoPlayStart"))})},setup:function(){var a=this,t=a.children(".panel"),e=a.data("settings"),n=a.data("pIndex"),s=(a.data("pCount"),e.transition),r=e.duration;switch(t.addClass("init "+s),a.addClass(e.easing),s){case"slide":t.css("transform","translateX(100%)").eq(n).css("transform","translateX(0%)")}t.eq(n).addClass("active"),t.css({WebkitTransitionDuration:r/1e3+"s",transitionDuration:r/1e3+"s"})},pager:function(){var e=this,a=e.children(".panel"),t=e.data("pCount"),n=e.data("settings"),s=g(n.pagerWrap),r=n.pagerText;s.empty();for(var i=0;i<t;i++){var o=a.eq(i).attr("title"),l=r.call(this,i+1,!1,o);l.appendTo(s),l.find("a").data("xIndex",i).on("click",function(a){a.preventDefault();var t=e.data("settings").pauseOnHit;e[v]("travel",g(this).data("xIndex")),t&&e[v]("autoPlayPause"),a.preventDefault()})}e[v]("pagerUpdate")},pagerUpdate:function(){var a=this.data("settings"),t=this.data("pIndex");g(a.pagerWrap).children().removeClass("activePanel").eq(t).addClass("activePanel")},controls:function(){var a=this.data("settings"),t=this.data("pIndex"),e=this.data("pCount"),n=(a.loop,g(a.controlsText[1]).prependTo(this)),s=g(a.controlsText[0]).prependTo(this);n.wrap('<div class="next-control-wrapper control-wrapper" />'),s.wrap('<div class="prev-control-wrapper control-wrapper" />'),0===t&&this.addClass("first-panel"),e<=t+1&&this.addClass("last-panel");var r={};return r.next=n,r.prev=s,r},prev:function(){return this.each(function(){var a=g(this),t=a.data("settings"),e=t.loop,n=a.data("pCount"),s=a.data("pIndex"),r=t.loopTrans,i=s,o=t.callbackBefore,l=!1;if(0<s?(s=i-1,l="backward"):e&&(l="end",s=n-1),a.data("xIndex",s),g.isFunction(o)&&!1===o.call(this))return!1;a.data("cIndex",i),a.data("autoPlay")&&a[v]("autoPlayReset"),a.data("pIndex",s),"backward"==l?a[v]("backPage",s):"end"==l&&(r?a[v]("backPage",s):a[v]("forPage",s))})},next:function(){return this.each(function(){var a=g(this),t=a.data("settings"),e=a.data("pCount"),n=a.data("pIndex"),s=t.loop,r=t.loopTrans,i=n,o=t.callbackBefore,l=!1;if(n+1<e?(n=i+1,l="forward"):s&&(n=0,l="first"),a.data("xIndex",n),g.isFunction(o)&&!1===o.call(this))return!1;a.data("cIndex",i),a.data("autoPlay")&&a[v]("autoPlayReset"),a.data("pIndex",n),"forward"==l?a[v]("forPage",n):"first"==l&&(r?a[v]("forPage",n):a[v]("backPage",n))})},travel:function(r){return this.each(function(){var a,t=g(this),e=t.data("settings"),n=t.data("pIndex"),s=(t.data("pCount"),e.callbackBefore);if(t.data("xIndex",r),g.isFunction(s)&&!1===s.call(this))return!1;t.data("autoPlay")&&t[v]("autoPlayReset"),n<r?(a=n,n=r,t.data("pIndex",n),t.data("cIndex",a),t[v]("forPage",n)):r<n&&(a=n,n=r,t.data("pIndex",n),t.data("cIndex",a),t[v]("backPage",n))})},backPage:function(){return this.each(function(){var a=g(this),t=a.children(".panel"),e=a.data("settings"),n=a.data("pIndex"),s=(e.loop,e.transition),r=e.autoHeight,i=e.dynamicHeight;e.duration;switch(t.removeClass("active").eq(n).addClass("active"),s){case"slide":a[v]("slideBack")}0===n&&a.addClass("first-panel"),a.removeClass("last-panel"),a[v]("pagerUpdate"),i&&r&&a[v]("recalcHeight");var o=e.callbackAfter;g.isFunction(o)&&t.eq(n).one("webkitTransitionEnd MSTransitionEnd transitionend",function(){o.call(this)})})},forPage:function(){return this.each(function(){var a=g(this),t=a.children(".panel"),e=a.data("settings"),n=a.data("pCount"),s=a.data("pIndex"),r=(e.loop,e.transition),i=e.autoHeight,o=e.dynamicHeight;e.duration;switch(t.removeClass("active").eq(s).addClass("active"),r){case"slide":a[v]("slideFor")}n<=s+1&&a.addClass("last-panel"),a.removeClass("first-panel"),a[v]("pagerUpdate"),o&&i&&a[v]("recalcHeight");var l=e.callbackAfter;g.isFunction(l)&&t.eq(s).one("webkitTransitionEnd MSTransitionEnd transitionend",function(){l.call(this)})})},slideFor:function(){var a=this,t=a.children(".panel"),e=a.data("settings"),n=a.data("cIndex"),s=a.data("pIndex"),r=e.duration,i=a.data("resetSlides"),o=a.data("resetTimeout");o&&(i(),clearTimeout(o)),t.eq(s).css("display"),t.eq(n).removeClass("init").css({transform:"translateX(-100%)"}),t.eq(s).css({transform:"translateX(100%)"}),t.eq(s).css("display"),t.eq(s).removeClass("init").css({transform:"translateX(0%)"}),i=function(){t.eq(n).addClass("init"),t.eq(s).addClass("init").css({transform:"translateX(0%)"}),o=!1},o=setTimeout(i,r),a.data({resetSlides:i,resetTimeout:o})},slideBack:function(){var a=this,t=a.children(".panel"),e=a.data("settings"),n=a.data("cIndex"),s=a.data("pIndex"),r=e.duration,i=a.data("resetSlides"),o=a.data("resetTimeout");o&&(i(),clearTimeout(o)),t.eq(s).css("display"),t.eq(n).removeClass("init").css({transform:"translateX(100%)"}),t.eq(s).addClass("init").css({transform:"translateX(-100%)"}),t.eq(s).css("display"),t.eq(s).removeClass("init").css({transform:"translateX(0%)"}),i=function(){t.eq(n).addClass("init"),t.eq(s).addClass("init"),o=!1},o=setTimeout(i,r),a.data({resetSlides:i,resetTimeout:o})}};g.fn[v]=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void g.error("Method "+a+" does not exist on jQuery[pluginName]"):e.init.apply(this,arguments)}}(jQuery);